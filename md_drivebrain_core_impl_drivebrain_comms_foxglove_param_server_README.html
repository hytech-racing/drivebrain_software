<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drivebrain Software: parameter server</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Drivebrain Software
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">parameter server </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >this component of the drivebrain will contain the foxglove parameter server implementation / intergration for handling the adjustment of internal parameters.</p>
<p >what we want to be able to do here is construct the parameter server from all configuration-needed software components</p>
<p >REQUIREMENTS:</p>
<ul>
<li>The configuration interface will expose to the parameter server what parameters exist</li>
<li>be able to re-save the final ptree :brain:? (this is something that ROS has lol)</li>
<li>the parameter server will also handle recording / tracking of all parameters changed and to what value</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
IMPLEMENTATION DETAILS</h1>
<p >on construction of the parameter server we give it a vector of each configurable-downcasted object. the parameter server looks at each of the options that the components contain and creates its vector of foxglove parameters with the correct types</p>
<p >all parameters will be tracked within a generated protobuf messages that each get populated initially on construction and are owned by this parameter server.</p>
<p >when a parameter change occurs, the protobuf message that contains all of the parameters for that component getting changed gets updated as well and then the parameter server puts it onto the queue to be sent out to the mcap recorder and the foxglove</p>
<h1><a class="anchor" id="autotoc_md6"></a>
NOTES</h1>
<p >the parameter server will also communicate with the mcap broadcaster?</p><ul>
<li>yes, and GRPC would be good for this I think for handling the handshake with <code>data_acq</code><ul>
<li>well, in reality I think we should only implement this if just assuming that <code>data_acq</code> is recording becomes a bad assumption.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
CONSIDERATIONS</h2>
<h3><a class="anchor" id="autotoc_md8"></a>
why dont we handle the mcap recording within our software here?</h3>
<ul>
<li>at this point why dont I just integrate the mcap recording into here?</li>
</ul>
<hr  />
 <h5>pros:</h5>
<ul>
<li>I wouldnt have to broadcast or handle deserialization / serialization of the protobuf messages out of the drivebrain core</li>
</ul>
<hr  />
 <h5>cons:</h5>
<ul>
<li>I would have to then handle all the meta data handling stuff here too tho which would require alot more integration with foxglove studio since we would need request-response (service calls) that is already mostly implemented in the <code>data_acq</code> service.</li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
- I would also have to implement the request / response call for starting and stopping of recording.</h1>
<h3><a class="anchor" id="autotoc_md12"></a>
why not also have this foxglove server broadcast out all of the mcap messages being received?</h3>
<hr  />
 <h5>pros:</h5>
<ul>
<li>we wouldnt have to have another service running on the pi</li>
<li>we wouldnt have to serialize, de-serialize and then re-serialize the same protobuf msg</li>
</ul>
<hr  />
 <h5>cons:</h5>
<ul>
<li>more work within this parameter server to achieve the same results that we currently have</li>
<li>reduces separation of concerns even more (codebase gets more messy and becomes more grown instead of designed)</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md16"></a>
TODO</h1>
<ul>
<li>[x] get a simple parameter being able to be changed from foxglove via this implementation</li>
<li>[ ] figure out how we can connect a boost ptree getting registered during runtime</li>
<li>[ ] implement the registering of the configurable components and test it out with real ptree </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
